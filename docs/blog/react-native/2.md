# React Navigation
源于React Native社区对基于Javascript的可扩展且使用简单的导航解决方案的需求。

安装 `yarn add react-navigation`，然后还需要安装相关依赖
```
yarn add react-native-reanimated react-native-gesture-handler react-navigation-stack react-navigation-tabs react-native-safe-area-context react-native-screens @react-native-community/masked-view
```
## 一、导航器
导航器也可以看成是⼀个普通的React组件，可以通过导航器来定义APP中的导航结构。导航器还可以渲染通⽤元素，例如可以配置的标题栏和选项卡栏。

在react-navigation中有以下类型的导航器：

* createStackNavigator:类似普通的Navigator，一个页面就是一个栈。
* createTabNavigator:已弃用，使⽤createBottomTabNavigator、createMaterialTopTabNavigator替代
* createBottomTabNavigator:相当于IOS⾥⾯的UITabBarController，屏幕下⽅的标签栏
* createMaterialTopTabNavigator:屏幕顶部的Material设计主题标签栏
* createDrawerNavigator:抽屉效果，侧边滑出
* createSwitchNavigator:SwitchNavigator的用途是⼀次只显示⼀个页⾯，常⽤于welcome页面⾯或者登陆页⾯，这种⻚⾯没有回退操作。
## 二、createStackNavigator-普通导航
createStackNavigator 提供APP屏幕之间切换的能⼒，它是以栈的形式管理屏幕之间的切换，新切换到的屏幕会放在栈的顶部。

stack navigator 被配置为具有熟悉的iOS和Android外观 & 感觉：新屏幕从iOS右侧滑⼊，从Android底部淡⼊。在iOS上，stack navigator 也可以配置为屏幕从底部滑⼊的模式样式。
### createStackNavigator API
```js
createStackNavigator(RouteConfigs, StackNavigatorConfig)
```
* RouteConfigs (必选)：路由配置对象是从路由名称到路由配置的映射，告诉导航器该路由呈现什么。
* StackNavigatorConfig (可选)：配置导航器的路由(如：默认⾸屏，navigationOptions，paths等)样式(如，转场模式mode、头部模式等)。
### RouteConfigs
RouteConfigs⽀持三个参数 screen 、 path 以及 navigationOptions ；

* screen (必选)：指定⼀个 React 组件作为屏幕的主要显示内容，当这个组件被
createStackNavigator加载时，它会被分配⼀个 navigation prop。
* path (可选)：⽤来设置⽀持schema跳转时使⽤
* navigationOptions (可选)：⽤以配置全局的屏幕导航选项如：title、headerRight、headerLeft等
### StackNavigatorConfig
StackNavigatorConfig支持配置的参数有7个，这7个参数可以根据作⽤不同分为路由配置、视图样式配置两类，⾸先看用于路由配置的参数：
#### 用于路由配置的参数
* initialRouteName: 设置默认的页面组件，必须是上⾯已注册的⻚⾯组件。
* initialRouteParams: 初始路由的参数。
* initialRouteKey：初始路由的可选标识符。
* defaultNavigationOptions: 屏幕导航的默认选项。
* navigationOptions: 导航器本身的导航选项，⽤于配置⽗导航器
* paths: ⽤来设置⽀持schema跳转时使⽤
* disableKeyboardHandling: 如果为true，则导航到新屏幕时键盘不会⾃动关闭。默认值：false。
#### 用于导航样式配置的参数
* mode: 页面切换模式: 左右是card(相当于iOS中的push效果), 上下是modal(相当于iOS中的modal效果)
   * card: 普通app常⽤的左右切换。
   * modal: 上下切换。
* headerMode: 导航栏的显示模式: screen: 有渐变透明效果, float: ⽆透明效果, none: 隐藏导航栏。
   * float: ⽆透明效果, 默认。
   * screen: 有渐变透明效果, 如微信QQ的⼀样。
   * none: 隐藏导航栏。
* headerBackTitleVisible : 提供合理的默认值以确定后退按钮标题是否可⻅，但如果要覆盖它，则可以使⽤true或false在此选项中。
   * fade-in-place: 标题组件交叉淡⼊淡出⽽不移动，类似于iOS的
    Twitter，Instagram和Facebook应⽤程序。 这是默认值。
   * uikit: iOS的默认⾏为的近似值。 headerTransitionPreset: 指定在启⽤headerMode：float 时header应如何从⼀个屏幕转换到另⼀个屏幕。
* cardStyle: 样式（iOS上⻚⾯切换会有⽩⾊渐变蒙层，想去掉则可以这样设置，cardStyle: {opacity: null },切换⻚⾯时的⻚⾯边框也在这⾥可以设置）。
* onTransitionStart: ⻚⾯切换开始时的回调函数 (我们可以在这⾥注册⼀些通知，告知我们切⾯切换的状态，⽅便后⾯处理⻚⾯切换事件)。
* onTransitionEnd: ⻚⾯切换结束时的回调函数。
### navigationOptions（屏幕导航选项）
支持以下参数：
* title: 可以作为headerTitle的备选字段(当没设置headerTitle时会⽤该字段作为标题)，也可以作为TabNavigator的tabBarLabel以及DrawerNavigator的drawerLabel。
* header: ⾃定义导航条，可以通过设置null来隐藏导航条；
* headerTitle: 标题；
* headerTitleAllowFontScaling: 标题是否允许缩放，默认true；
* headerBackTitle: 定义在iOS上当前⻚⾯进⼊到下⼀⻚⾯的回退标题，可以通过设置null来禁⽤它；
* headerTruncatedBackTitle: 当回退标题不能显示的时候显示此属性的标题，⽐如回退标题太⻓了；
* headerBackImage：React 元素或组件在标题的后退按钮中显示⾃定义图⽚。 当组件被调⽤时，它会在渲染时收到许多 props 如：（tintColor，title）。 默认为带有 react-navigation/views/assets/back-icon.png 这张图⽚的组件，后者是平台的默认后图标图像（iOS上为向左的符号，Android上为箭头）。
* headerRight: 定义导航栏右边视图；
* headerLeft: 定义导航栏左边视图；
* headerStyle: 定义导航栏的样式，⽐如背景⾊等；
* headerTitleStyle: 定义标题的样式；
* headerLeftContainerStyle：⾃定义 headerLeft 组件容器的样式，例如，增加 padding。
* headerRightContainerStyle：⾃定义 headerRight 组件容器的样式,，例如，增加 padding。
* headerTitleContainerStyle：⾃定义 headerTitle 组件容器的样式, 例如，增加 padding。
* headerBackTitleStyle: 定义返回标题的样式；
* headerPressColorAndroid：颜⾊为材料波纹 (Android >= 5.0)；
* headerTintColor: 定义导航条的tintColor，会覆盖headerTitleStyle中的颜⾊；
* headerTransparent：默认为 false。如果 true, 则标头将不会有背景, 除⾮您显式提供headerStyle 或 headerBackground。
* headerBackground：与headerTransparent⼀起使⽤，以提供在标题后台呈现的组件。 例如，您可以使⽤模糊视图来创建半透明标题。
* gesturesEnabled: 定义是否能侧滑返回，iOS默认true，Android默认false；
* gestureResponseDistance: 定义滑动返回的有效距离，⽔平状态下默认：25，垂直状态默认135；
* gestureDirection: 设置关闭⼿势的⽅向。默认从左向右，可以设置从右到左的滑动操作。
### 案例
App.js
```jsx
import React from 'react'
import { StyleSheet } from 'react-native'

import { createAppContainer } from 'react-navigation'
import { createStackNavigator } from 'react-navigation-stack' // 栈导航器
import { createBottomTabNavigator } from 'react-navigation-tabs'
import HomeScreen from './Screen/Home'
import DetailScreen from './Screen/Detail'

// 创建栈导航器，并通过AppContainer包裹栈导航器
const RootStack = createAppContainer(createStackNavigator(
  {
    Home: {
      screen: HomeScreen,
      navigationOptions: {
        title: '首页', // 设置导航栏标题
        headerBackTitle: '自定义标题' // 从其他页面返回到该页面时的标题
      }
    },
    Detail: {
      screen: DetailScreen,
      // 这个也可以放到Detail页面里设置
      // navigationOptions: {
      //   title: '详情页'
      // }
    }
  },
  {
    initialRouteName: 'Home',  // 初始的路由的名字
    defaultNavigationOptions: {  // 设置默认的导航选项
      headerStyle: {  // 设置头部的样式
        backgroundColor: 'green', // 设置背景颜色
      },
      headerTitleAlign: 'center',
      headerTitleStyle: {
        color: 'white'
      },
      headerBackTitle: '返回',
      headerBackTitleVisible: true
    },
    mode: 'card'
  }
))

// 创建底部tab导航器
const RootTabNavigator = createAppContainer(createBottomTabNavigator(
  {
    Home: {
      screen: HomeScreen,
      navigationOptions: {
        title: '首页'
      }
    },
    Detail: {
      screen: DetailScreen,
      navigationOptions: {
        title: '详情页'
      }
    }
  }
))

const App = () => {
  return (
    <RootStack />
    // <RootTabNavigator />
  )
}

export default App
```
Home.js
```jsx
import React from 'react'
import { StyleSheet, Text, View, Button } from 'react-native'

const Home = (props) => {
    const { navigation } = props

    // 跳转到详情页
    const jumpToDetail = () => {
        navigation.navigate('Detail', {
            title: '这是传过来的标题',
            userInfo: '这是信息'
        })
    }

    return (
        <View>
            <Text>Home页面</Text>
            <Button title='跳转到详情' onPress={jumpToDetail}>
            </Button>
        </View>
    )
}

export default Home
```
Detail.js
```jsx
import React from 'react'
import { Button, StyleSheet, Text, View } from 'react-native'

const Detail = () => {
    return (
        <View>
            <Text>Detail页面</Text>
        </View>
    )
}

Detail.navigationOptions = (props) => {
    const { navigation } = props
    const { state: { params } } = props.navigation // params里面有路由参数
    return {
        title: '详情页',
        headerRight: (
            <Button title='保存' onPress={() => {
                navigation.goBack()
                // navigation.navigate('Home')
                // navigation.push('Home')
                // navigation.popToTop()
            }} />
        )
    }
}

export default Detail
```
## 三、createBottomTabNavigator-底部导航
## 四、createMaterialTopTabNavigator-顶部导航
## 五、createDrawerNavigator-抽屉导航
## 六、createSwitchNavigator-开关导航