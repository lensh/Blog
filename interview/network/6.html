<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>dns递归查询和迭代查询 | 洛清寒前端进阶</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.3.0">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.bb0d65c1.css" as="style"><link rel="preload" href="/blog/assets/js/app.644297fd.js" as="script"><link rel="preload" href="/blog/assets/js/2.a9ec72d1.js" as="script"><link rel="preload" href="/blog/assets/js/77.bf30bfba.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.77389835.js"><link rel="prefetch" href="/blog/assets/js/11.9a95e166.js"><link rel="prefetch" href="/blog/assets/js/12.6d39bf29.js"><link rel="prefetch" href="/blog/assets/js/13.6e6a1f6d.js"><link rel="prefetch" href="/blog/assets/js/14.76007265.js"><link rel="prefetch" href="/blog/assets/js/15.80edba86.js"><link rel="prefetch" href="/blog/assets/js/16.ddf36931.js"><link rel="prefetch" href="/blog/assets/js/17.4d510613.js"><link rel="prefetch" href="/blog/assets/js/18.94f603c7.js"><link rel="prefetch" href="/blog/assets/js/19.8a0c1a61.js"><link rel="prefetch" href="/blog/assets/js/20.49868929.js"><link rel="prefetch" href="/blog/assets/js/21.fa64e25e.js"><link rel="prefetch" href="/blog/assets/js/22.1941b530.js"><link rel="prefetch" href="/blog/assets/js/23.b4734cd3.js"><link rel="prefetch" href="/blog/assets/js/24.5c30b561.js"><link rel="prefetch" href="/blog/assets/js/25.e9929117.js"><link rel="prefetch" href="/blog/assets/js/26.6252dc65.js"><link rel="prefetch" href="/blog/assets/js/27.94324fc3.js"><link rel="prefetch" href="/blog/assets/js/28.08a18a0b.js"><link rel="prefetch" href="/blog/assets/js/29.ddcb457a.js"><link rel="prefetch" href="/blog/assets/js/3.eb255792.js"><link rel="prefetch" href="/blog/assets/js/30.a29a9c54.js"><link rel="prefetch" href="/blog/assets/js/31.467a9c98.js"><link rel="prefetch" href="/blog/assets/js/32.85bb9404.js"><link rel="prefetch" href="/blog/assets/js/33.748c772c.js"><link rel="prefetch" href="/blog/assets/js/34.0565688f.js"><link rel="prefetch" href="/blog/assets/js/35.fcafe8b5.js"><link rel="prefetch" href="/blog/assets/js/36.99576581.js"><link rel="prefetch" href="/blog/assets/js/37.a07cb70b.js"><link rel="prefetch" href="/blog/assets/js/38.db551065.js"><link rel="prefetch" href="/blog/assets/js/39.86f13279.js"><link rel="prefetch" href="/blog/assets/js/4.13e4e37b.js"><link rel="prefetch" href="/blog/assets/js/40.773966dc.js"><link rel="prefetch" href="/blog/assets/js/41.9ce57645.js"><link rel="prefetch" href="/blog/assets/js/42.a4ce4efc.js"><link rel="prefetch" href="/blog/assets/js/43.fcb6e83e.js"><link rel="prefetch" href="/blog/assets/js/44.96ce826b.js"><link rel="prefetch" href="/blog/assets/js/45.6c505424.js"><link rel="prefetch" href="/blog/assets/js/46.eda42f8c.js"><link rel="prefetch" href="/blog/assets/js/47.f69612c9.js"><link rel="prefetch" href="/blog/assets/js/48.b420c9c7.js"><link rel="prefetch" href="/blog/assets/js/49.707e6558.js"><link rel="prefetch" href="/blog/assets/js/5.a81b0ad3.js"><link rel="prefetch" href="/blog/assets/js/50.e70391c2.js"><link rel="prefetch" href="/blog/assets/js/51.e649c4f8.js"><link rel="prefetch" href="/blog/assets/js/52.bd9bb4aa.js"><link rel="prefetch" href="/blog/assets/js/53.5a27e949.js"><link rel="prefetch" href="/blog/assets/js/54.930f6a0f.js"><link rel="prefetch" href="/blog/assets/js/55.b3bac5f8.js"><link rel="prefetch" href="/blog/assets/js/56.50515c85.js"><link rel="prefetch" href="/blog/assets/js/57.069974ab.js"><link rel="prefetch" href="/blog/assets/js/58.58094304.js"><link rel="prefetch" href="/blog/assets/js/59.919b752e.js"><link rel="prefetch" href="/blog/assets/js/6.acf27024.js"><link rel="prefetch" href="/blog/assets/js/60.57126b1e.js"><link rel="prefetch" href="/blog/assets/js/61.dee8d5ae.js"><link rel="prefetch" href="/blog/assets/js/62.eddf6ab8.js"><link rel="prefetch" href="/blog/assets/js/63.d19567e5.js"><link rel="prefetch" href="/blog/assets/js/64.4407e21c.js"><link rel="prefetch" href="/blog/assets/js/65.589bb240.js"><link rel="prefetch" href="/blog/assets/js/66.5a0f526d.js"><link rel="prefetch" href="/blog/assets/js/67.f6d6530b.js"><link rel="prefetch" href="/blog/assets/js/68.c29f6ed8.js"><link rel="prefetch" href="/blog/assets/js/69.ade584a8.js"><link rel="prefetch" href="/blog/assets/js/7.7a100ff5.js"><link rel="prefetch" href="/blog/assets/js/70.d045c18e.js"><link rel="prefetch" href="/blog/assets/js/71.870b99cd.js"><link rel="prefetch" href="/blog/assets/js/72.4be4c112.js"><link rel="prefetch" href="/blog/assets/js/73.b8ab8b71.js"><link rel="prefetch" href="/blog/assets/js/74.5255718b.js"><link rel="prefetch" href="/blog/assets/js/75.7880394a.js"><link rel="prefetch" href="/blog/assets/js/76.38feddb7.js"><link rel="prefetch" href="/blog/assets/js/78.f6052f6f.js"><link rel="prefetch" href="/blog/assets/js/79.ba904019.js"><link rel="prefetch" href="/blog/assets/js/8.67965e6b.js"><link rel="prefetch" href="/blog/assets/js/80.317a42ff.js"><link rel="prefetch" href="/blog/assets/js/81.5b6c42ad.js"><link rel="prefetch" href="/blog/assets/js/82.33f428d0.js"><link rel="prefetch" href="/blog/assets/js/83.0b6f3509.js"><link rel="prefetch" href="/blog/assets/js/84.a17665cb.js"><link rel="prefetch" href="/blog/assets/js/85.977868bc.js"><link rel="prefetch" href="/blog/assets/js/86.1b4fa722.js"><link rel="prefetch" href="/blog/assets/js/87.5b334972.js"><link rel="prefetch" href="/blog/assets/js/88.ff3739d5.js"><link rel="prefetch" href="/blog/assets/js/89.3ea17f37.js"><link rel="prefetch" href="/blog/assets/js/9.743d0d51.js"><link rel="prefetch" href="/blog/assets/js/90.f2bf12f5.js"><link rel="prefetch" href="/blog/assets/js/91.94f0a843.js"><link rel="prefetch" href="/blog/assets/js/92.34a6dff4.js"><link rel="prefetch" href="/blog/assets/js/93.57887ca1.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.bb0d65c1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/images/blog.jpg" alt="洛清寒前端进阶" class="logo"> <span class="site-name can-hide">洛清寒前端进阶</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/blog/" class="nav-link">
  进阶博文
</a></div><div class="nav-item"><a href="/blog/interview/" class="nav-link router-link-active">
  笔试面试
</a></div><div class="nav-item"><a href="https://juejin.im/post/5dfef50751882512444027eb" target="_blank" rel="noopener noreferrer" class="nav-link external">
  大厂面经
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/lensh/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><span class="title">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/lensh/vue-qq" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue-qq
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/lensh/mini-promise" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mini-promise
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/lensh/React-SSR" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react-ssr
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/blog/" class="nav-link">
  进阶博文
</a></div><div class="nav-item"><a href="/blog/interview/" class="nav-link router-link-active">
  笔试面试
</a></div><div class="nav-item"><a href="https://juejin.im/post/5dfef50751882512444027eb" target="_blank" rel="noopener noreferrer" class="nav-link external">
  大厂面经
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/lensh/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><span class="title">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/lensh/vue-qq" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue-qq
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/lensh/mini-promise" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mini-promise
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/lensh/React-SSR" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react-ssr
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/blog/interview/css/1.html" class="sidebar-heading clickable"><span>css</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/interview/es6/1.html" class="sidebar-heading clickable"><span>es6</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/interview/html/1.html" class="sidebar-heading clickable"><span>html</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/interview/js/1.html" class="sidebar-heading clickable"><span>js</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/interview/node/1.html" class="sidebar-heading clickable"><span>node</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/interview/react/react.html" class="sidebar-heading clickable"><span>react</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/interview/vue/1.html" class="sidebar-heading clickable"><span>vue</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/interview/webpack/1.html" class="sidebar-heading clickable"><span>webpack</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/interview/browser/1.html" class="sidebar-heading clickable"><span>浏览器</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/interview/coding/1.html" class="sidebar-heading clickable"><span>编程题</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/interview/network/1.html" class="sidebar-heading clickable open"><span>网络和网络安全</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/interview/network/1.html" class="sidebar-link">XSS和CSRF</a></li><li><a href="/blog/interview/network/2.html" class="sidebar-link">其它常见web攻击</a></li><li><a href="/blog/interview/network/3.html" class="sidebar-link">http2.0、http3.0、https</a></li><li><a href="/blog/interview/network/4.html" class="sidebar-link">http三次握手四次挥手</a></li><li><a href="/blog/interview/network/5.html" class="sidebar-link">HTTP协议类</a></li><li><a href="/blog/interview/network/6.html" class="active sidebar-link">dns递归查询和迭代查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/interview/network/6.html#一、基础知识" class="sidebar-link">一、基础知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/interview/network/6.html#域名系统" class="sidebar-link">域名系统</a></li><li class="sidebar-sub-header"><a href="/blog/interview/network/6.html#域名服务器" class="sidebar-link">域名服务器</a></li><li class="sidebar-sub-header"><a href="/blog/interview/network/6.html#域名解析过程" class="sidebar-link">域名解析过程</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/interview/network/6.html#二、递归查询" class="sidebar-link">二、递归查询</a></li><li class="sidebar-sub-header"><a href="/blog/interview/network/6.html#三、迭代查询" class="sidebar-link">三、迭代查询</a></li><li class="sidebar-sub-header"><a href="/blog/interview/network/6.html#四、总结" class="sidebar-link">四、总结</a></li></ul></li><li><a href="/blog/interview/network/7.html" class="sidebar-link">UDP和TCP</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/interview/practice-mode/1.html" class="sidebar-heading clickable"><span>设计模式</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/interview/suanfa/1.html" class="sidebar-heading clickable"><span>算法和数据结构</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dns递归查询和迭代查询"><a href="#dns递归查询和迭代查询" class="header-anchor">#</a> dns递归查询和迭代查询</h1> <p>递归查询：本机向本地域名服务器发出一次查询请求，就静待最终的结果。如果本地域名服务器无法解析，自己会以DNS客户机的身份向其它域名服务器查询，直到得到最终的IP地址告诉本机。</p> <p>迭代查询：本地域名服务器向根域名服务器查询，根域名服务器告诉它下一步到哪里去查询，然后它再去查，每次它都是以客户机的身份去各个服务器查询。</p> <h2 id="一、基础知识"><a href="#一、基础知识" class="header-anchor">#</a> 一、基础知识</h2> <h3 id="域名系统"><a href="#域名系统" class="header-anchor">#</a> 域名系统</h3> <p><img src="https://note.youdao.com/yws/public/resource/032d69a7a91a67b80368aaf4f5731333/7AD467DDD2AA4878B9940DDE748186A3?ynotemdtimestamp=1581512269288" alt="image"></p> <p><img src="https://note.youdao.com/yws/public/resource/032d69a7a91a67b80368aaf4f5731333/2FE3F90C31E34F1AA0F7AB38CE25DEAC?ynotemdtimestamp=1581512269288" alt="image"></p> <h3 id="域名服务器"><a href="#域名服务器" class="header-anchor">#</a> 域名服务器</h3> <p><img src="https://note.youdao.com/yws/public/resource/032d69a7a91a67b80368aaf4f5731333/96F6A07B7AD843B0BE3D72D9F4E2A5EA?ynotemdtimestamp=1581512269288" alt="image"></p> <h3 id="域名解析过程"><a href="#域名解析过程" class="header-anchor">#</a> 域名解析过程</h3> <p>1.在浏览器中输入www.qq.com域名，操作系统会先检查自己本地的hosts文件是否有这个网址映射关系，如果有，就先调用这个IP地址映射，完成域名解析。</p> <p>2.如果hosts里没有这个域名的映射，则查找本地DNS解析器缓存，是否有这个网址映射关系，如果有，直接返回，完成域名解析。</p> <p>3.如果hosts与本地DNS解析器缓存都没有相应的网址映射关系，首先会找TCP/IP参数中设置的首选DNS服务器，在此我们叫它本地DNS服务器，</p> <p>此服务器收到查询时，如果要查询的域名，包含在本地配置区域资源中，则返回解析结果给客户机，完成域名解析，此解析具有权威性。</p> <p>4.如果要查询的域名，不由本地DNS服务器区域解析，但该服务器已缓存了此网址映射关系，则调用这个IP地址映射，完成域名解析，此解析不具有权威性。</p> <p>5.如果本地DNS服务器本地区域文件与缓存解析都失效，则根据本地DNS服务器的设置（是否设置转发器）进行查询，</p> <p>如果未用转发模式，本地DNS就把请求发至“根DNS服务器”，“根DNS服务器”收到请求后会判断这个域名(.com)是谁来授权管理，并会返回一个负责该顶级域名服务器的一个IP。</p> <p>本地DNS服务器收到IP信息后，将会联系负责.com域的这台服务器。这台负责.com域的服务器收到请求后，如果自己无法解析，它就会找一个管理.com域的下一级DNS服务器地址(qq.com)给本地DNS服务器。当本地DNS服务器收到这个地址后，就会找qq.com域服务器，重复上面的动作，进行查询，直至找到www.qq.com主机。</p> <p>6.如果用的是转发模式，此DNS服务器就会把请求转发至上一级DNS服务器，由上一级服务器进行解析，上一级服务器如果不能解析，或找根DNS或把转请求转至上上级，以此循环。</p> <p>不管是本地DNS服务器用是是转发，还是根提示，最后都是把结果返回给本地DNS服务器，由此DNS服务器再返回给客户机。</p> <h2 id="二、递归查询"><a href="#二、递归查询" class="header-anchor">#</a> 二、递归查询</h2> <p><strong>主机向本地域名服务器的查询一般都是采用递归查询。</strong></p> <p>所谓递归查询就是：如果主机所询问的本地域名服务器不知道被查询的域名的IP地址，那么本地域名服务器就以DNS客户的身份，向其它根域名服务器继续发出查询请求报文(即替主机继续查询)，而不是让主机自己进行下一步查询。因此，递归查询返回的查询结果或者是所要查询的IP地址，或者是报错，表示无法查询到所需的IP地址。</p> <h2 id="三、迭代查询"><a href="#三、迭代查询" class="header-anchor">#</a> 三、迭代查询</h2> <p><strong>本地域名服务器向根域名服务器的查询是迭代查询。</strong></p> <p>迭代查询的特点：当根域名服务器收到本地域名服务器发出的迭代查询请求报文时，要么给出所要查询的IP地址，要么告诉本地服务器：“你下一步应当向哪一个域名服务器进行查询”，然后让本地服务器进行后续的查询。</p> <p>根域名服务器通常是把自己知道的顶级域名服务器的IP地址告诉本地域名服务器，让本地域名服务器再向顶级域名服务器查询。顶级域名服务器在收到本地域名服务器的查询请求后，要么给出所要查询的IP地址，要么告诉本地服务器下一步应当向哪一个权限域名服务器进行查询。最后，知道了所要解析的IP地址或报错，然后把这个结果返回给发起查询的主机。</p> <p><img src="https://note.youdao.com/yws/public/resource/032d69a7a91a67b80368aaf4f5731333/374C0BB7DE844248ADB82821FDFA019B?ynotemdtimestamp=1581512269288" alt="image"></p> <p><img src="https://note.youdao.com/yws/public/resource/032d69a7a91a67b80368aaf4f5731333/77F4DEB69FCA4A1A869182F4CEE733DC?ynotemdtimestamp=1581512269288" alt="image"></p> <h2 id="四、总结"><a href="#四、总结" class="header-anchor">#</a> 四、总结</h2> <p>递归：客户端只发一次请求，要求对方给出最终结果。</p> <p>迭代：客户端发出一次请求，对方如果没有授权回答，它就会返回一个能解答这个查询的其它名称服务器列表，客户端会再向返回的列表中发出请求，直到找到最终负责所查域名的名称服务器，从它得到最终结果。</p> <p>授权回答：向dns服务器查询一个域名，刚好这个域名是本服务器负责，返回的结果就是授权回答。</p> <p>从递归和迭代查询可以看出：</p> <p><strong>客户端-本地dns服务端：这部分属于递归查询。</strong></p> <p><strong>本地dns服务端-外网：这部分属于迭代查询。</strong></p> <p>递归查询时，返回的结果只有两种:查询成功或查询失败.</p> <p>迭代查询，又称作重指引,返回的是最佳的查询点或者主机地址.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/12/2020, 3:12:47 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/interview/network/5.html" class="prev">
        HTTP协议类
      </a></span> <span class="next"><a href="/blog/interview/network/7.html">
        UDP和TCP
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.644297fd.js" defer></script><script src="/blog/assets/js/2.a9ec72d1.js" defer></script><script src="/blog/assets/js/77.bf30bfba.js" defer></script>
  </body>
</html>
